1:HL["/_next/static/media/103fb0c975d13c4f-s.p.woff2",{"as":"font","type":"font/woff2"}]
2:HL["/_next/static/css/8901cee9e57be060.css",{"as":"style"}]
0:["UyodjtPjI3VwUKtH1FLbP",[[["",{"children":["blog",{"children":[["slug","deploy-nextjs-to-github","d"],{"children":["__PAGE__?{\"slug\":\"deploy-nextjs-to-github\"}",{}]}]}]},"$undefined","$undefined",true],"$L3",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/8901cee9e57be060.css","precedence":"next"}]],"$L4"]]]]
5:I{"id":610,"chunks":["685:static/chunks/685-37ac10ae36ac1df4.js","42:static/chunks/42-4f3af3e2455936db.js","185:static/chunks/app/layout-f0f7fae5966ecc25.js"],"name":"Providers","async":false}
6:I{"id":9037,"chunks":["685:static/chunks/685-37ac10ae36ac1df4.js","42:static/chunks/42-4f3af3e2455936db.js","185:static/chunks/app/layout-f0f7fae5966ecc25.js"],"name":"HtmlWithTheme","async":false}
7:I{"id":2243,"chunks":["685:static/chunks/685-37ac10ae36ac1df4.js","42:static/chunks/42-4f3af3e2455936db.js","185:static/chunks/app/layout-f0f7fae5966ecc25.js"],"name":"Navigation","async":false}
8:I{"id":7767,"chunks":["272:static/chunks/webpack-57c4f32ea129713f.js","971:static/chunks/fd9d1056-d14c2ed43eb473b3.js","596:static/chunks/596-7a79afd8655e8bf5.js"],"name":"default","async":false}
9:I{"id":7920,"chunks":["272:static/chunks/webpack-57c4f32ea129713f.js","971:static/chunks/fd9d1056-d14c2ed43eb473b3.js","596:static/chunks/596-7a79afd8655e8bf5.js"],"name":"default","async":false}
c:I{"id":6685,"chunks":["685:static/chunks/685-37ac10ae36ac1df4.js","308:static/chunks/app/blog/[slug]/page-272983a6fad259b4.js"],"name":"","async":false}
b:T183d,<p>On Github it has been possible to host a simple static website for a long time already. By default Github uses Jekyll as static site generator. I have tried this out in the past and it works well for simple sites, but it is not the only way to host a website on Github.</p>
<p>In this blog post I want to explain how I am deploying a Next.JS application to Github pages.</p>
<h3>What is Next.JS?</h3>
<p>Next.JS is a React framework that allows you to built websites and web applications using React. By default it comes with anything you need so no configuration or setup required. All you need to do to get started is run:</p>
<pre><code>npx create-next-app@latest
</code></pre>
<h4>The Export function</h4>
<p>One of the many features it has is an export function. This feature will turn your Next.JS app into a static website. The export will execute all the <code>getStaticProps</code> functions inside your components and makes the output part of the Javascript bundle. This way there will be no API calls needed anymore during runtime.</p>
<p>The output of this export function is what I am hosting on Github pages.</p>
<h3>Setup git repository</h3>
<p>Before we can deploy anything you will need to create a new repository first. The repository will need to have 2 branches.</p>
<ol>
<li>main: This branch will contain our source code we work in</li>
<li>gh-pages: This branch will contain the compiled version of our site</li>
</ol>
<p>After you have done that go to the <code>settings -> pages</code> of your repository.</p>
<p><img src="/images/screenshot-ghpages.png" alt="Screenshot of Github settings page"></p>
<p>On this page you can enable github pages by selecting a source branch and click <code>save</code>. As source branch select the branch <code>gh-pages</code>.</p>
<h3>Create Nexct.JS project</h3>
<p>We need something to deploy so create an empty Next.JS app using <code>npx create-next-app@latest</code> and push to the main-branch.</p>
<h3>Setup Github workflow</h3>
<p>This is where the magic happens. Github allows us to define build pipelines using Yaml files very similar to how pipelines work in Azure DevOps (for those who work with Azure DevOps at work).</p>
<p>Checkout your repository locally and create the file <code>.github/workflows/gh-pages.yml</code> inside your repository.</p>
<p>My gh-pages workflow looks as following:</p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">GitHub</span> <span class="hljs-string">Pages</span> <span class="hljs-string">deploy</span>

<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">build:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>

    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">üõéÔ∏è</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2.3.1</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Use</span> <span class="hljs-string">Node.js</span> <span class="hljs-number">14.</span><span class="hljs-string">x</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v1</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">node-version:</span> <span class="hljs-string">"14.x"</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Run</span> <span class="hljs-string">install</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">borales/actions-yarn@v4</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">cmd:</span> <span class="hljs-string">install</span> <span class="hljs-comment"># will run `yarn install` command</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">my</span> <span class="hljs-string">App</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">yarn</span> <span class="hljs-string">build</span> <span class="hljs-string">&#x26;&#x26;</span> <span class="hljs-string">yarn</span> <span class="hljs-string">export</span> <span class="hljs-string">&#x26;&#x26;</span> <span class="hljs-string">touch</span> <span class="hljs-string">./out/.nojekyll</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">üöÄ</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">JamesIves/github-pages-deploy-action@4.1.0</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">GITHUB_TOKEN:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.GITHUB_TOKEN</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">BRANCH:</span> <span class="hljs-string">gh-pages</span> <span class="hljs-comment"># The branch the action should deploy to.</span>
          <span class="hljs-attr">FOLDER:</span> <span class="hljs-string">out</span> <span class="hljs-comment"># The folder the action should deploy.</span>
</code></pre>
<p>First this pipeline defines a trigger. The trigger will execute the build-pipeline everytime new changes are pushed to the main-branch.</p>
<p>Under jobs we can define our build steps. The pipeline performs the following steps:</p>
<ol>
<li>Clone repository</li>
<li>Install node</li>
<li>Run yarn install</li>
<li>Compile and export Next.JS website</li>
<li>Deploy output to the branch <code>gh-pages</code>. (this should be the same branch you configured in the previous step).</li>
</ol>
<p>Push this file to your main branch and you are done. It will now compile and deploy a Next.JS app to the gh-pages-branch.</p>3:[null,["$","$L5",null,{"children":["$","$L6",null,{"children":["$","body",null,{"className":"__className_33e12a","children":[["$","div",null,{"className":"fluid-container page-wrapper","children":[["$","$L7",null,{"menuItems":[{"path":"/","label":"Home"},{"path":"/about","label":"About"},{"path":"/blog","label":"Blog"}]}],["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"childProp":{"current":["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children",["slug","deploy-nextjs-to-github","d"],"children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$La",["$","div",null,{"className":"container py-5 lh-lg","children":["$","div",null,{"className":"row","children":[["$","div",null,{"className":"col-0 col-lg-2"}],["$","div",null,{"className":"col-12 col-lg-8 px-3","children":[[["$","h1",null,{"className":"mb-2","children":"Deploy static Next.js site to Github pages"}],["$","time",null,{"dateTime":"2022-12-04","children":["Published at: ","04 December 2022"]}],["$","div",null,{"className":"mt-4","dangerouslySetInnerHTML":{"__html":"$b"}}]],["$","$Lc",null,{"href":"/blog","children":"Back to overview"}]]}],["$","div",null,{"className":"col-0 col-lg-2"}]]}]}],null],"segment":"__PAGE__?{\"slug\":\"deploy-nextjs-to-github\"}"},"styles":[]}],"segment":["slug","deploy-nextjs-to-github","d"]},"styles":[]}],"segment":"blog"},"styles":[]}]]}],["$","footer",null,{"className":"container-fluid px-3 px-lg-5 footer z-3","children":["$","div",null,{"className":"d-lg-flex justify-content-between","children":[["$","small",null,{"children":["$","span",null,{"children":["Copyright ¬© ","2023"," - Werner Langenhuisen",["$","a",null,{"href":"https://github.com/WernerLDev/werlang.nl","target":"_blank","rel":"noreferrer","className":"ps-3 d-none d-lg-inline","children":"View source"}]]}]}],["$","div",null,{"className":"fs-5 d-flex d-lg-block justify-content-between","children":[["$","small",null,{"children":["$","a",null,{"href":"https://github.com/WernerLDev/werlang.nl","target":"_blank","rel":"noreferrer","className":"pe-3 d-inline d-lg-none","children":"View source"}]}],["$","span",null,{"children":[["$","a",null,{"rel":"author","href":"https://github.com/WernerLDev/","children":["$","i",null,{"className":"bi bi-github"}]}]," ",["$","a",null,{"rel":"author","href":"https://www.linkedin.com/in/wernerl/","children":["$","i",null,{"className":"bi bi-linkedin"}]}]]}]]}]]}]}]]}]}]}],null]
4:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Deploy static Next.js site to Github pages | werlang.nl"}],["$","meta","2",{"name":"description","content":"Personal website of Werner"}],["$","meta","3",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link","4",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","link","5",{"rel":"icon","href":"/icon1.png?eddb2306776d44cb","type":"image/png","sizes":"16x16"}],["$","link","6",{"rel":"icon","href":"/icon2.png?102f74894260c2df","type":"image/png","sizes":"32x32"}],["$","link","7",{"rel":"apple-touch-icon","href":"/apple-icon.png?21245fa937cee9a5","type":"image/png","sizes":"180x180"}],["$","meta","8",{"name":"next-size-adjust"}]]
a:null
