<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><title>Deploy static Next.js site to Github pages - werlang.nl</title><meta name="next-head-count" content="7"/><link rel="preload" href="/_next/static/css/bc204571a855a089.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bc204571a855a089.css" data-n-g=""/><link rel="preload" href="/_next/static/css/d9bbb7a8370221c4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d9bbb7a8370221c4.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-9ea6ce4703e4f273.js" defer=""></script><script src="/_next/static/chunks/pages/_app-eb87e1104b75ceba.js" defer=""></script><script src="/_next/static/chunks/144-6e4c1e7a89ad358b.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-fba0fa46003d8e2e.js" defer=""></script><script src="/_next/static/78Qp8SZdimizuE3FXcJ_H/_buildManifest.js" defer=""></script><script src="/_next/static/78Qp8SZdimizuE3FXcJ_H/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="page-wrapper"><header class="container-fluid bgcolor-dark border-top border-5 border-dark header_header__GSKJx"><div class="header_pattern__7_1O_"><nav class="navbar navbar-expand-md navbar-dark p-0"><div class="container d-flex justify-content-end"><button class="navbar-toggler my-2" type="button" aria-controls="mainNavigation" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="d-none collapse navbar-collapse d-md-flex justify-content-md-center" id="mainNavigation"><ul class="navbar-nav mb-2 mb-md-0"><li class="nav-item px-4 py-2 false"><a class="nav-link" href="/">Home</a></li><li class="nav-item px-4 py-2 false"><a class="nav-link" href="/about-me">About me</a></li><li class="nav-item px-4 py-2 false"><a class="nav-link" href="/blog">Blog</a></li></ul></div></div></nav><div class="container p-5"><div class="col-12 py-2 fgcolor-light text-center"><h1 class="mt-5">Deploy static Next.js site to Github pages</h1><span>Published at<!-- --> <time dateTime="2022-12-04T00:00:00.000Z">04 December 2022</time></span></div></div></div></header><main><div class="container p-4"><div class="row"><div class="d-none d-lg-block col-lg-1"></div><div class="col-12 col-lg-10 mt-1 mb-5 mt-lg-4"><div><p>On Github it has been possible to host a simple static website for a long time already. By default Github uses Jekyll as static site generator. I have tried this out in the past and it works well for simple sites, but it is not the only way to host a website on Github.</p>
<p>In this blog post I want to explain how I am deploying a Next.JS application to Github pages.</p>
<h3>What is Next.JS?</h3>
<p>Next.JS is a React framework that allows you to built websites and web applications using React. By default it comes with anything you need so no configuration or setup required. All you need to do to get started is run:</p>
<pre><code class="hljs language-lua">npx <span class="hljs-built_in">create</span>-<span class="hljs-built_in">next</span>-app@latest
</code></pre>
<h4>The Export function</h4>
<p>One of the many features it has is an export function. This feature will turn your Next.JS app into a static website. The export will execute all the <code>getStaticProps</code> functions inside your components and makes the output part of the Javascript bundle. This way there will be no API calls needed anymore during runtime.</p>
<p>The output of this export function is what I am hosting on Github pages.</p>
<h3>Setup git repository</h3>
<p>Before we can deploy anything you will need to create a new repository first. The repository will need to have 2 branches.</p>
<ol>
<li>main: This branch will contain our source code we work in</li>
<li>gh-pages: This branch will contain the compiled version of our site</li>
</ol>
<p>After you have done that go to the <code>settings -> pages</code> of your repository.</p>
<p><img src="/images/screenshot-ghpages.png" alt="Screenshot of Github settings page"></p>
<p>On this page you can enable github pages by selecting a source branch and click <code>save</code>. As source branch select the branch <code>gh-pages</code>.</p>
<p>If the repository is still empty first create an empty Next.JS app using <code>npx create-next-app@latest</code> and push to the main-branch before proceeding.</p>
<h3>Setup Github workflow</h3>
<p>This is where the magic happens. Github allows us to define build pipelines using Yaml files very similar to how pipelines work in Azure DevOps (for those who work with Azure DevOps at work).</p>
<p>Check out your repository locally and create the file <code>.github/workflows/gh-pages.yml</code> inside your repository.</p>
<p>My gh-pages workflow looks as following:</p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">GitHub</span> <span class="hljs-string">Pages</span> <span class="hljs-string">deploy</span>

<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">main</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">build:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>

    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">üõéÔ∏è</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2.3.1</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Use</span> <span class="hljs-string">Node.js</span> <span class="hljs-number">14.</span><span class="hljs-string">x</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v1</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">node-version:</span> <span class="hljs-string">"14.x"</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Run</span> <span class="hljs-string">install</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">borales/actions-yarn@v4</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">cmd:</span> <span class="hljs-string">install</span> <span class="hljs-comment"># will run `yarn install` command</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">my</span> <span class="hljs-string">App</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">yarn</span> <span class="hljs-string">build</span> <span class="hljs-string">&#x26;&#x26;</span> <span class="hljs-string">yarn</span> <span class="hljs-string">export</span> <span class="hljs-string">&#x26;&#x26;</span> <span class="hljs-string">touch</span> <span class="hljs-string">./out/.nojekyll</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">üöÄ</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">JamesIves/github-pages-deploy-action@4.1.0</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">GITHUB_TOKEN:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.GITHUB_TOKEN</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">BRANCH:</span> <span class="hljs-string">gh-pages</span> <span class="hljs-comment"># The branch the action should deploy to.</span>
          <span class="hljs-attr">FOLDER:</span> <span class="hljs-string">out</span> <span class="hljs-comment"># The folder the action should deploy.</span>
</code></pre>
<p>First this pipeline defines a trigger. The trigger will execute the build-pipeline everytime new changes are pushed to the main-branch.</p>
<p>Under jobs we can define multiple jobs. Right now there is only a build step that executes 4 steps.</p>
<ol>
<li>Install node</li>
<li>Run yarn install</li>
<li>Compile and export Next.JS website</li>
<li>Deploy output to the branch <code>gh-pages</code>. (this should be the same branch you configured in the previous step).</li>
</ol>
<p>Push this file to your main branch and you are done. It will now compile and build a Next.JS app (given that there is a Next.JS app in your main-branch)</p></div><a href="/blog">Back to overview</a></div><div class="d-none d-lg-block col-lg-1"></div></div></div></main></div><footer class="footer_footer__LV2HF"><div class="container p-5"><div class="row"><div class="col-12 col-md-9"><p><small>Copyright ¬© <!-- -->2022<!-- --> - Werner Langenhuisen. Built with Next.JS.<!-- --> <a href="https://github.com/WernerLDev/werlang.nl" target="_blank" rel="noreferrer">View source</a>.</small></p><p><small>Source code is licensed under a<!-- --> <a href="https://www.gnu.org/licenses/agpl-3.0.html" rel="license">GNU AGPLv3</a> <!-- -->license. All content is licensed under a<!-- --> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International</a> <!-- -->License.</small></p></div><div class="col-12 col-md-3 text-lg-end"><h5>Links</h5><ul class="list-unstyled"><li class="mb-1"><a href="https://github.com/WernerLDev" rel="me">Github</a></li><li class="mb-1"><a href="https://www.linkedin.com/in/wernerl/" rel="me">LinkedIn</a></li><li class="mb-0"><a href="mailto:werner@werlang.nl">E-mail</a></li></ul></div></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"metaData":{"title":"Deploy static Next.js site to Github pages","metaDesc":"I have built my website using Next.JS and host it on Github pages. In this blogpost I will show how I have configured my github repository.","date":"2022-12-04","draft":false,"slug":"howto-nextjs-ghpages"},"content":"\u003cp\u003eOn Github it has been possible to host a simple static website for a long time already. By default Github uses Jekyll as static site generator. I have tried this out in the past and it works well for simple sites, but it is not the only way to host a website on Github.\u003c/p\u003e\n\u003cp\u003eIn this blog post I want to explain how I am deploying a Next.JS application to Github pages.\u003c/p\u003e\n\u003ch3\u003eWhat is Next.JS?\u003c/h3\u003e\n\u003cp\u003eNext.JS is a React framework that allows you to built websites and web applications using React. By default it comes with anything you need so no configuration or setup required. All you need to do to get started is run:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-lua\"\u003enpx \u003cspan class=\"hljs-built_in\"\u003ecreate\u003c/span\u003e-\u003cspan class=\"hljs-built_in\"\u003enext\u003c/span\u003e-app@latest\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4\u003eThe Export function\u003c/h4\u003e\n\u003cp\u003eOne of the many features it has is an export function. This feature will turn your Next.JS app into a static website. The export will execute all the \u003ccode\u003egetStaticProps\u003c/code\u003e functions inside your components and makes the output part of the Javascript bundle. This way there will be no API calls needed anymore during runtime.\u003c/p\u003e\n\u003cp\u003eThe output of this export function is what I am hosting on Github pages.\u003c/p\u003e\n\u003ch3\u003eSetup git repository\u003c/h3\u003e\n\u003cp\u003eBefore we can deploy anything you will need to create a new repository first. The repository will need to have 2 branches.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003emain: This branch will contain our source code we work in\u003c/li\u003e\n\u003cli\u003egh-pages: This branch will contain the compiled version of our site\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eAfter you have done that go to the \u003ccode\u003esettings -\u003e pages\u003c/code\u003e of your repository.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/screenshot-ghpages.png\" alt=\"Screenshot of Github settings page\"\u003e\u003c/p\u003e\n\u003cp\u003eOn this page you can enable github pages by selecting a source branch and click \u003ccode\u003esave\u003c/code\u003e. As source branch select the branch \u003ccode\u003egh-pages\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eIf the repository is still empty first create an empty Next.JS app using \u003ccode\u003enpx create-next-app@latest\u003c/code\u003e and push to the main-branch before proceeding.\u003c/p\u003e\n\u003ch3\u003eSetup Github workflow\u003c/h3\u003e\n\u003cp\u003eThis is where the magic happens. Github allows us to define build pipelines using Yaml files very similar to how pipelines work in Azure DevOps (for those who work with Azure DevOps at work).\u003c/p\u003e\n\u003cp\u003eCheck out your repository locally and create the file \u003ccode\u003e.github/workflows/gh-pages.yml\u003c/code\u003e inside your repository.\u003c/p\u003e\n\u003cp\u003eMy gh-pages workflow looks as following:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eGitHub\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePages\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edeploy\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003eon:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003epush:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ebranches:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emain\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003ejobs:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ebuild:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eruns-on:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eubuntu-latest\u003c/span\u003e\n\n    \u003cspan class=\"hljs-attr\"\u003esteps:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eCheckout\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eüõéÔ∏è\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eactions/checkout@v2.3.1\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eUse\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eNode.js\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e14.\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003ex\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eactions/setup-node@v1\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ewith:\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003enode-version:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"14.x\"\u003c/span\u003e\n\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eRun\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003einstall\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eborales/actions-yarn@v4\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ewith:\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003ecmd:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003einstall\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# will run `yarn install` command\u003c/span\u003e\n\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eBuild\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emy\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eApp\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003erun:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eyarn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebuild\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eyarn\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etouch\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./out/.nojekyll\u003c/span\u003e\n\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eDeploy\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eüöÄ\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003euses:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eJamesIves/github-pages-deploy-action@4.1.0\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ewith:\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eGITHUB_TOKEN:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e${{\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003esecrets.GITHUB_TOKEN\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e}}\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eBRANCH:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003egh-pages\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# The branch the action should deploy to.\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eFOLDER:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eout\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# The folder the action should deploy.\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFirst this pipeline defines a trigger. The trigger will execute the build-pipeline everytime new changes are pushed to the main-branch.\u003c/p\u003e\n\u003cp\u003eUnder jobs we can define multiple jobs. Right now there is only a build step that executes 4 steps.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eInstall node\u003c/li\u003e\n\u003cli\u003eRun yarn install\u003c/li\u003e\n\u003cli\u003eCompile and export Next.JS website\u003c/li\u003e\n\u003cli\u003eDeploy output to the branch \u003ccode\u003egh-pages\u003c/code\u003e. (this should be the same branch you configured in the previous step).\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003ePush this file to your main branch and you are done. It will now compile and build a Next.JS app (given that there is a Next.JS app in your main-branch)\u003c/p\u003e"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"howto-nextjs-ghpages"},"buildId":"78Qp8SZdimizuE3FXcJ_H","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>